import"core-js/modules/es.array.fill.js";import"core-js/modules/es.array.flat.js";import"core-js/modules/es.array.for-each.js";import"core-js/modules/es.array.some.js";import"core-js/modules/es.array.unscopables.flat.js";import"core-js/modules/es.object.to-string.js";import"core-js/modules/es.object.values.js";import"core-js/modules/es.promise.js";import"core-js/modules/web.dom-collections.for-each.js";import"regenerator-runtime/runtime.js";import"core-js/modules/es.array.concat.js";import"core-js/modules/es.array.slice.js";import"core-js/modules/es.array.filter.js";import"core-js/modules/es.function.name.js";import"core-js/modules/es.number.constructor.js";import"core-js/modules/es.array.map.js";function e(e,n,t,i,s,o,r){try{var l=e[o](r),a=l.value}catch(e){return void t(e)}l.done?n(a):Promise.resolve(a).then(i,s)}function n(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function t(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function i(e){for(var i=1;i<arguments.length;i++){var s=null!=arguments[i]?arguments[i]:{};i%2?t(Object(s),!0).forEach((function(t){n(e,t,s[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):t(Object(s)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(s,n))}))}return e}var s={props:{field:Object,fieldClasses:String},computed:{required:function(){return this.field.rules.filter((function(e){return"required"==e.callback.name})).length>=1}}};function o(e,n,t,i,s,o,r,l,a,d){"boolean"!=typeof r&&(a=l,l=r,r=!1);const c="function"==typeof t?t.options:t;let u;if(e&&e.render&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0,s&&(c.functional=!0)),i&&(c._scopeId=i),o?(u=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,a(e)),e&&e._registeredComponents&&e._registeredComponents.add(o)},c._ssrRegister=u):n&&(u=r?function(e){n.call(this,d(e,this.$root.$options.shadowRoot))}:function(e){n.call(this,l(e))}),u)if(c.functional){const e=c.render;c.render=function(n,t){return u.call(t),e(n,t)}}else{const e=c.beforeCreate;c.beforeCreate=e?[].concat(e,u):[u]}return t}const r="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function l(e){return(e,n)=>function(e,n){const t=r?n.media||"default":e,i=d[t]||(d[t]={ids:new Set,styles:[]});if(!i.ids.has(e)){i.ids.add(e);let t=n.source;if(n.map&&(t+="\n/*# sourceURL="+n.map.sources[0]+" */",t+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n.map))))+" */"),i.element||(i.element=document.createElement("style"),i.element.type="text/css",n.media&&i.element.setAttribute("media",n.media),void 0===a&&(a=document.head||document.getElementsByTagName("head")[0]),a.appendChild(i.element)),"styleSheet"in i.element)i.styles.push(t),i.element.styleSheet.cssText=i.styles.filter(Boolean).join("\n");else{const e=i.ids.size-1,n=document.createTextNode(t),s=i.element.childNodes;s[e]&&i.element.removeChild(s[e]),s.length?i.element.insertBefore(n,s[e]):i.element.appendChild(n)}}}(e,n)}let a;const d={};var c=s,u=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"w-full"},[t("div",{staticClass:"flex border-b border-40"},[t("div",{staticClass:"px-8 py-6 w-1/5"},[t("label",{staticClass:"inline-block text-80 pt-2 leading-tight",attrs:{for:e.field.attr.id}},[e._v("\n                  "+e._s(e.field.label)+"\n                  "),e.required?t("span",{staticClass:"text-danger"},[e._v("*")]):e._e()])]),e._v(" "),t("div",{staticClass:"py-6 px-8 w-1/2",class:e.fieldClasses},[e._t("field")],2),e._v(" "),e._t("default")],2)])};u._withStripped=!0;var f=o({render:u,staticRenderFns:[]},(function(e){e&&e("data-v-4297f03d_0",{source:"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",map:{version:3,sources:[],names:[],mappings:"",file:"DefaultField.vue"},media:void 0})}),c,undefined,false,undefined,!1,l,void 0,void 0),p={components:{DefaultField:f},inheritAttrs:!1,props:{field:Object,inputClasses:String,fieldClasses:String,inlineBtn:String,mixed:Object},methods:{input:function(e){this.field.setFormat("input",e),this.field.validate("input")},blur:function(e){this.field.setFormat("blur",e),this.field.validate("blur"),this.field.markAsDirty()},keydown:function(e){this.field.setFormat("keydown",e),this.field.validate("keydown")},keyup:function(e){this.field.setFormat("keyup",e),this.field.validate("keyup")}},computed:{inputStyle:function(){if(this.mixed)return"right"==this.mixed.position?"border-top-right-radius: 0px;border-bottom-right-radius: 0px;":"border-top-left-radius: 0px;border-bottom-left-radius: 0px;"}}},m=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("DefaultField",{attrs:{field:e.field,fieldClasses:e.fieldClasses}},[t("template",{slot:"field"},[t("div",{staticClass:"relative flex"},[e.mixed&&"left"==e.mixed.position?t("div",[t("span",{staticClass:"-mr-1 flex items-center bg-30 rounded-r-none px-3 whitespace-no-wrap text-sm form-control form-input-bordered"},[e._v(e._s(e.mixed.text))])]):e._e(),e._v(" "),"checkbox"===(e.$attrs.type||"text")?t("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.field.value,expression:"field.value"}],staticClass:"w-full form-control form-input form-input-bordered",class:{"border-danger":e.field.errors.length},style:e.inputStyle,attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.field.value)?e._i(e.field.value,null)>-1:e.field.value},on:{input:e.input,blur:e.blur,keydown:e.keydown,keyup:e.keyup,change:function(n){var t=e.field.value,i=n.target,s=!!i.checked;if(Array.isArray(t)){var o=e._i(t,null);i.checked?o<0&&e.$set(e.field,"value",t.concat([null])):o>-1&&e.$set(e.field,"value",t.slice(0,o).concat(t.slice(o+1)))}else e.$set(e.field,"value",s)}}},"input",e.$attrs,!1)):"radio"===(e.$attrs.type||"text")?t("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.field.value,expression:"field.value"}],staticClass:"w-full form-control form-input form-input-bordered",class:{"border-danger":e.field.errors.length},style:e.inputStyle,attrs:{type:"radio"},domProps:{checked:e._q(e.field.value,null)},on:{input:e.input,blur:e.blur,keydown:e.keydown,keyup:e.keyup,change:function(n){return e.$set(e.field,"value",null)}}},"input",e.$attrs,!1)):t("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.field.value,expression:"field.value"}],staticClass:"w-full form-control form-input form-input-bordered",class:{"border-danger":e.field.errors.length},style:e.inputStyle,attrs:{type:e.$attrs.type||"text"},domProps:{value:e.field.value},on:{input:[function(n){n.target.composing||e.$set(e.field,"value",n.target.value)},e.input],blur:e.blur,keydown:e.keydown,keyup:e.keyup}},"input",e.$attrs,!1)),e._v(" "),e.inlineBtn?t("button",{staticClass:"text-primary font-bold cursor-pointer absolute text-sm focus:outline-none active:outline-none focus:shadow-outline active:shadow-outline",staticStyle:{top:"30%",right:"2%"},attrs:{type:"button"},on:{click:function(n){return e.$emit("click")}}},[e._v(e._s(e.inlineBtn))]):e._e(),e._v(" "),e.mixed&&"right"==e.mixed.position?t("div",[t("span",{staticClass:"-ml-1 flex items-center bg-30 rounded-l-none px-3 whitespace-no-wrap text-sm form-control form-input-bordered"},[e._v(e._s(e.mixed.text))])]):e._e()]),e._v(" "),e.field.errors.length?t("small",{staticClass:"text-danger italic"},[e._v(e._s(e.field.errors[0]))]):e._e()])],2)};m._withStripped=!0;var v=o({render:m,staticRenderFns:[]},(function(e){e&&e("data-v-5ef5fc90_0",{source:"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",map:{version:3,sources:[],names:[],mappings:"",file:"NovaInputField.vue"},media:void 0})}),p,undefined,false,undefined,!1,l,void 0,void 0),h={components:{DefaultField:f},inheritAttrs:!1,props:{field:Object},methods:{input:function(e){this.field.setFormat("input"),this.field.validate("input")},change:function(){this.field.setFormat("change"),this.field.validate("change")}}},b=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("DefaultField",{attrs:{field:e.field,fieldClasses:"flex items-center"}},[i("template",{slot:"field"},[i("input",e._b({directives:[{name:"model",rawName:"v-model",value:e.field.value,expression:"field.value"}],staticClass:"checkbox",attrs:{type:"checkbox"},domProps:n({checked:e.field.value},"checked",Array.isArray(e.field.value)?e._i(e.field.value,null)>-1:e.field.value),on:{input:e.input,change:[function(n){var t=e.field.value,i=n.target,s=!!i.checked;if(Array.isArray(t)){var o=e._i(t,null);i.checked?o<0&&e.$set(e.field,"value",t.concat([null])):o>-1&&e.$set(e.field,"value",t.slice(0,o).concat(t.slice(o+1)))}else e.$set(e.field,"value",s)},e.change]}},"input",e.$attrs,!1)),e._v(" "),e.field.errors.length?i("small",{staticClass:"text-danger italic"},[e._v(e._s(e.field.errors[0]))]):e._e()])],2)};b._withStripped=!0;var g=o({render:b,staticRenderFns:[]},(function(e){e&&e("data-v-6009d218_0",{source:"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",map:{version:3,sources:[],names:[],mappings:"",file:"NovaCheckboxField.vue"},media:void 0})}),h,undefined,false,undefined,!1,l,void 0,void 0),y={name:"Loader",props:{width:{type:[Number,String],required:!1,default:50},fillColor:{type:String,required:!1,default:"currentColor"}}},w=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("svg",{staticClass:"mx-auto block",style:"width: "+e.width+"px",attrs:{viewBox:"0 0 120 30",xmlns:"http://www.w3.org/2000/svg",fill:e.fillColor}},[t("circle",{attrs:{cx:"15",cy:"15",r:"15"}},[t("animate",{attrs:{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}}),e._v(" "),t("animate",{attrs:{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"}})]),e._v(" "),t("circle",{attrs:{cx:"60",cy:"15",r:"9","fill-opacity":"0.3"}},[t("animate",{attrs:{attributeName:"r",from:"9",to:"9",begin:"0s",dur:"0.8s",values:"9;15;9",calcMode:"linear",repeatCount:"indefinite"}}),e._v(" "),t("animate",{attrs:{attributeName:"fill-opacity",from:"0.5",to:"0.5",begin:"0s",dur:"0.8s",values:".5;1;.5",calcMode:"linear",repeatCount:"indefinite"}})]),e._v(" "),t("circle",{attrs:{cx:"105",cy:"15",r:"15"}},[t("animate",{attrs:{attributeName:"r",from:"15",to:"15",begin:"0s",dur:"0.8s",values:"15;9;15",calcMode:"linear",repeatCount:"indefinite"}}),e._v(" "),t("animate",{attrs:{attributeName:"fill-opacity",from:"1",to:"1",begin:"0s",dur:"0.8s",values:"1;.5;1",calcMode:"linear",repeatCount:"indefinite"}})])])};w._withStripped=!0;var _={props:{processing:{type:Boolean,default:!1}},methods:{focus:function(){this.$refs.button.focus()}},components:{Loader:o({render:w,staticRenderFns:[]},undefined,y,undefined,false,undefined,!1,void 0,void 0,void 0)}},x=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("button",e._g({ref:"button",staticClass:"btn btn-default btn-primary inline-flex items-center relative",attrs:{type:"button"}},e.$listeners),[t("span",{class:{invisible:e.processing}},[e._t("default")],2),e._v(" "),e.processing?t("span",{staticClass:"absolute",staticStyle:{top:"50%",left:"50%",transform:"translate(-50%, -50%)"}},[t("loader",{staticClass:"text-white",attrs:{width:"32"}})],1):e._e()])};x._withStripped=!0;var A=o({render:x,staticRenderFns:[]},undefined,_,undefined,false,undefined,!1,void 0,void 0,void 0),C={components:{DefaultField:f},inheritAttrs:!1,props:{field:Object,inputClasses:String,fieldClasses:String},methods:{input:function(e){this.field.setFormat("input"),this.field.validate("input")},change:function(e){this.field.setFormat("input"),this.field.validate("input")},blur:function(){this.field.setFormat("blur"),this.field.validate("blur")}}},k=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("DefaultField",{attrs:{field:e.field,fieldClasses:e.fieldClasses}},[t("template",{slot:"field"},[t("select",e._b({directives:[{name:"model",rawName:"v-model",value:e.field.value,expression:"field.value"}],staticClass:"w-full form-control form-select",class:{"border-danger":e.field.errors.length},on:{input:e.input,blur:e.blur,change:[function(n){var t=Array.prototype.filter.call(n.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.field,"value",n.target.multiple?t:t[0])},e.change]}},"select",e.$attrs,!1),[t("option",{attrs:{value:""}},[e._v("-")]),e._v(" "),e._l(e.field.options,(function(n,i){return t("option",{key:i,domProps:{value:n.value}},[e._v(e._s(n.label))])}))],2),e._v(" "),e.field.errors.length?t("small",{staticClass:"text-danger italic"},[e._v(e._s(e.field.errors[0]))]):e._e()])],2)};k._withStripped=!0;var j={components:{NovaInputField:v,NovaCheckboxField:g,NovaSelectField:o({render:k,staticRenderFns:[]},(function(e){e&&e("data-v-12f4fbf3_0",{source:"\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",map:{version:3,sources:[],names:[],mappings:"",file:"NovaSelectField.vue"},media:void 0})}),C,undefined,false,undefined,!1,l,void 0,void 0),NovaProgressButton:A},data:function(){return{fields:{},modalResolver:null,modalRejecter:null,showModal:!1,config:null,submitted:!1}},methods:{open:function(e){var n=this;return new Promise((function(t,i){n.modalResolver=t,n.modalRejecter=i,n.config=e,n.fields=e.fields,n.showModal=!0}))},close:function(){this.config=null,this.showModal=!1,this.modalRejecter()},submit:function(){var n,t=this;return(n=regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Object.values(t.fields).flat().forEach((function(e){return e.touch()})),!Object.values(t.fields).flat().some((function(e){return!e.isValid}))){e.next=3;break}return e.abrupt("return");case 3:if(n={},Object.values(t.fields).flat().forEach((function(e){n=i(i({},n),e.fill())})),!t.config.callback){e.next=23;break}return e.prev=6,t.submitted=!0,e.next=10,t.config.callback(n);case 10:t.modalResolver(n),t.config=null,t.showModal=!1,t.submitted=!1,e.next=21;break;case 16:e.prev=16,e.t0=e.catch(6),t.submitted=!1,console.log(e.t0),e.t0.response&&422==e.t0.response.status?Object.values(e.t0.response.data.errors).forEach((function(e){t.$toasted.show(e,{type:"error"})})):t.$toasted.show("There was an error submitting the form",{type:"error"});case 21:e.next=27;break;case 23:t.modalResolver(n),t.config=null,t.showModal=!1,t.submitted=!1;case 27:case"end":return e.stop()}}),e,null,[[6,16]])})),function(){var t=this,i=arguments;return new Promise((function(s,o){var r=n.apply(t,i);function l(n){e(r,s,o,l,a,"next",n)}function a(n){e(r,s,o,l,a,"throw",n)}l(void 0)}))})()},handleKeydown:function(e){"Escape"==e.key&&this.close()}},mounted:function(){window.addEventListener("keydown",this.handleKeydown)},beforeDestroy:function(){window.removeEventListener("keydown",this.handleKeydown)}},N=function(){var e=this,n=e.$createElement,t=e._self._c||n;return e.showModal?t("div",{staticClass:"modal-editor",on:{click:function(n){return n.target!==n.currentTarget?null:(n.stopPropagation(),e.close())}}},[t("div",{staticClass:"box-wrapper",staticStyle:{width:"800px"}},[t("div",{staticClass:"bg-white rounded-lg shadow-lg overflow-hidden w-full"},[t("div",[t("h2",{staticClass:"border-b border-40 py-6 px-6 text-90 font-normal text-xl"},[e._v("\n                  "+e._s(e.config.title)+"\n                  ")])]),e._v(" "),e._l(e.fields,(function(n,i){return[t("div",{directives:[{name:"show",rawName:"v-show",value:"no-header"!==i,expression:"key !== 'no-header'"}],key:i,staticClass:"bg-30 px-6 py-3 flex",staticStyle:{height:"65px"}},[t("div",{staticClass:"flex items-center mr-auto"},[e._v("\n                          "+e._s(i)+"\n                      ")])]),e._v(" "),e._l(n,(function(n,s){return t(n.component,e._b({key:s+"_"+i,tag:"component",attrs:{field:n,fieldClasses:"w-3/4",autocomplete:"nope"}},"component",n.attr,!1))}))]})),e._v(" "),t("div",{staticClass:"bg-30 px-6 py-3 flex"},[t("div",{staticClass:"flex items-center ml-auto"},[t("button",{staticClass:"btn btn-link dim cursor-pointer text-80 ml-auto mr-6",attrs:{type:"button"},on:{click:function(n){return n.preventDefault(),n.stopPropagation(),e.close()}}},[e._v("Cancel")]),e._v(" "),t("NovaProgressButton",{attrs:{type:"button",disabled:e.submitted,processing:e.submitted},on:{click:function(n){return n.preventDefault(),n.stopPropagation(),e.submit()}}},[e._v("\n                      "+e._s(e.config.title)+"\n                      ")])],1)])],2)])]):e._e()};N._withStripped=!0;var S=o({render:N,staticRenderFns:[]},(function(e){e&&e("data-v-729bf03f_0",{source:"\n.modal-editor[data-v-729bf03f] {\n    position: fixed;\n    height: 100%;\n    width: 100%;\n    top: 0;\n    bottom: 0;\n    right: 0;\n    left: 0;\n    display: flex;\n    justify-content: center;\n    padding-top: 50;\n    background-color: rgba(179, 185, 191, 0.8);\n    z-index: 100;\n    padding: 50px 0;\n}\n.box-wrapper[data-v-729bf03f]{\n    height: 100%;\n    overflow: auto;\n    width: 650px;\n}\n",map:{version:3,sources:["/Users/meilichluria/Sites/npm-input-fields/src/modals/nova/EditorModal.vue"],names:[],mappings:";AA4JA;IACA,eAAA;IACA,YAAA;IACA,WAAA;IACA,MAAA;IACA,SAAA;IACA,QAAA;IACA,OAAA;IACA,aAAA;IACA,uBAAA;IACA,eAAA;IACA,0CAAA;IACA,YAAA;IACA,eAAA;AACA;AACA;IACA,YAAA;IACA,cAAA;IACA,YAAA;AACA",file:"EditorModal.vue",sourcesContent:['<template>\n  <div class="modal-editor" v-if="showModal" @click.self.stop="close()">\n        <div class="box-wrapper" style="width:800px;">\n            <div class="bg-white rounded-lg shadow-lg overflow-hidden w-full">\n                <div>\n                    <h2 class="border-b border-40 py-6 px-6 text-90 font-normal text-xl">\n                    {{config.title}}\n                    </h2>\n                </div>\n\n                <template\n                    v-for="(header,key) in fields"\n                >\n\n                    <div \n                        v-show="key !== \'no-header\'" \n                        :key="key"\n                        style="height:65px" class="bg-30 px-6 py-3 flex"\n                    >\n                        <div class="flex items-center mr-auto">\n                            {{key}}\n                        </div>\n                    </div>  \n\n                    <component\n                        v-for="(field,index) in header"\n                        :key="`${index}_${key}`"\n                        :is="field.component"\n                        :field="field"\n                        v-bind="field.attr"\n                        fieldClasses="w-3/4"\n                        autocomplete="nope"\n                    />\n\n                </template>\n\n                <div class="bg-30 px-6 py-3 flex">\n                    <div class="flex items-center ml-auto">\n                        <button @click.prevent.stop="close()" type="button" class="btn btn-link dim cursor-pointer text-80 ml-auto mr-6">Cancel</button>\n                        \n                        <NovaProgressButton\n                        @click.prevent.stop="submit()"\n                        type="button"\n                        :disabled="submitted"\n                        :processing="submitted"\n                        >\n                        {{config.title}}\n                        </NovaProgressButton>\n                    </div>\n                </div>\n            </div>\n        </div>      \n    </div>\n</template>\n\n<script>\nimport NovaInputField from \'../../fields/nova/NovaInputField.vue\'\nimport NovaCheckboxField from \'../../fields/nova/NovaCheckboxField.vue\'\nimport NovaProgressButton from \'../../fields/nova/NovaProgressButton.vue\'\nimport NovaSelectField from \'../../fields/nova/NovaSelectField.vue\'\nexport default {\n    components:{\n        NovaInputField,\n        NovaCheckboxField,\n        NovaSelectField,\n        NovaProgressButton\n    },\n\n    data(){\n        return{\n            fields:{},\n            modalResolver:null,\n            modalRejecter:null,\n            showModal:false,\n            config:null,\n            submitted:false\n        }\n    },\n\n    methods:{\n        open(config){\n            return new Promise((resolve,reject)=>{\n                this.modalResolver = resolve\n                this.modalRejecter = reject\n\n                this.config = config\n                this.fields = config.fields// JSON.parse(JSON.stringify(config.fields))\n                this.showModal = true\n            })\n        },\n\n        close(){\n            this.config = null\n            this.showModal = false\n            this.modalRejecter()\n        },\n\n        async submit(){\n            Object.values(this.fields).flat().forEach(field=> field.touch())\n            if(Object.values(this.fields).flat().some(field => !field.isValid))return\n\n            let payload = {}\n            Object.values(this.fields).flat().forEach(field => {\n                payload = {...payload,...field.fill()}\n            })\n\n            if(this.config.callback){\n                try {\n                    this.submitted = true\n                    await this.config.callback(payload)\n                    this.modalResolver(payload)\n                    this.config = null\n                    this.showModal = false\n                    this.submitted = false\n                } catch (error) {\n                    this.submitted = false\n                    console.log(error);\n                    if(error.response && error.response.status == 422){\n                        Object.values(error.response.data.errors).forEach(error =>{\n                            this.$toasted.show(\n                                error,\n                                { type: \'error\' }\n                            )\n                        })\n                        \n                    }else{\n                        this.$toasted.show(\n                            \'There was an error submitting the form\',\n                            { type: \'error\' }\n                        )\n                    }\n                }\n            }else{\n                this.modalResolver(payload)\n                this.config = null\n                this.showModal = false\n                this.submitted = false\n            } \n        },\n\n        handleKeydown(e){\n            if(e.key == \'Escape\')this.close()\n        },\n    },\n\n    mounted(){\n        window.addEventListener(\'keydown\',this.handleKeydown)\n    },\n\n    beforeDestroy(){\n        window.removeEventListener(\'keydown\',this.handleKeydown)\n    }\n}\n<\/script>\n\n<style scoped>\n.modal-editor {\n    position: fixed;\n    height: 100%;\n    width: 100%;\n    top: 0;\n    bottom: 0;\n    right: 0;\n    left: 0;\n    display: flex;\n    justify-content: center;\n    padding-top: 50;\n    background-color: rgba(179, 185, 191, 0.8);\n    z-index: 100;\n    padding: 50px 0;\n}\n.box-wrapper{\n    height: 100%;\n    overflow: auto;\n    width: 650px;\n}\n</style>']},media:void 0})}),j,"data-v-729bf03f",false,undefined,!1,l,void 0,void 0);var $={install:function(e,n){var t=e.prototype.$editorModal=new e(S).$mount();"undefined"!=typeof document&&document.body.appendChild(t.$el)}};export{S as EditorModal,$ as editorModalPlugin};
